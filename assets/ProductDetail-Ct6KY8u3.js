import{_ as N,C as P,r as u,o as x,z as A,a,b as o,t as r,u as p,h as q,j as m,B,w as $,A as D,s as f,g as S,f as l}from"./index-DovkYrFm.js";import{e as E}from"./emptyImg-CXXJHA4n.js";const M={class:"container"},O={class:"product-detail"},R={key:0,class:"center"},T={key:1,class:"center error"},V={key:2,class:"content"},U={class:"media"},z=["src","alt"],J=["src"],j={class:"info"},G={class:"title"},H={class:"price"},K={key:0,class:"description"},L={class:"controls"},W={class:"qty"},Y=["disabled"],F={key:0,class:"stock"},Q=["disabled"],X=["disabled"],Z={key:3,class:"center"},ee={__name:"ProductDetail",setup(te){const k=P(),h=B(),_=k.params.id,e=u(null),d=u(!1),i=u(null),s=u(1);async function y(c){d.value=!0,i.value=null;try{const t=await S(c);t?e.value=t:i.value="Product not found."}catch(t){i.value="Error loading product.",console.error(t)}finally{d.value=!1}}console.log(e);function g(){e.value?.stock!=null&&s.value>=e.value.stock||s.value++}function b(){s.value>1&&s.value--}function w(){if(!e.value)return;const c={id:e.value.id,name:e.value.product,price:e.value.price,qty:s.value,image:e.value.image};try{const t=localStorage.getItem("cart"),n=t?JSON.parse(t):[],v=n.find(I=>I.id===c.id);v?v.qty=Math.min(e.value.stock??1/0,v.qty+c.qty):n.push(c),localStorage.setItem("cart",JSON.stringify(n)),window.alert("Added to cart")}catch(t){console.error("Could not update cart",t)}}function C(){if(!e.value)return;const c=`Hola, estoy interesado en el producto: ${e.value.product} (Cantidad: ${s.value}).`,n=`https://wa.me/543446670475?text=${encodeURIComponent(c)}`;window.open(n,"_blank")}return x(()=>{_&&y(_)}),A(e,()=>{console.log("PRODUCTO:",e.value),console.log("IMAGE_KEY:",e.value?.image_key)}),(c,t)=>(l(),a("div",M,[o("div",O,[d.value?(l(),a("div",R,"Loading product…")):i.value?(l(),a("div",T,r(i.value),1)):e.value?(l(),a("div",V,[o("div",U,[e.value.image_key?(l(),a("img",{key:0,src:p(q)(e.value),alt:e.value.product,loading:"lazy",class:"product-image"},null,8,z)):(l(),a("img",{key:1,src:p(E),alt:""},null,8,J))]),o("div",j,[o("button",{class:"back-btn",onClick:t[0]||(t[0]=n=>p(h).back()),style:{float:"right"}},"← Back"),o("h1",G,r(e.value.product),1),o("p",H,"$"+r(e.value.price),1),e.value.description?(l(),a("p",K,r(e.value.description),1)):m("",!0),o("div",L,[o("div",W,[o("button",{onClick:b,disabled:s.value<=1},"−",8,Y),$(o("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=n=>s.value=n),min:"1"},null,512),[[D,s.value,void 0,{number:!0}]]),o("button",{onClick:g},"+"),e.value.stock!=null?(l(),a("span",F,"("+r(e.value.stock)+" in stock)",1)):m("",!0)]),o("button",{class:"add",onClick:w,disabled:e.value.stock===0},[...t[2]||(t[2]=[o("i",{class:"fa-solid fa-cart-plus"},null,-1),f(" Añadir al carrito ",-1)])],8,Q),o("button",{class:"whatsApp",onClick:C,disabled:e.value.stock===0},[...t[3]||(t[3]=[o("i",{class:"fa-brands fa-whatsapp"},null,-1),f(" Pedir por WhatsApp ",-1)])],8,X)])])])):(l(),a("div",Z,"No product selected."))])]))}},ae=N(ee,[["__scopeId","data-v-4094ad7e"]]);export{ae as default};
