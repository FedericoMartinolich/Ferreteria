import{_ as I,A as x,r as u,o as N,a as n,t as r,b as s,f as _,u as q,z as A,w as P,x as $,l as f,g as B,e as c}from"./index-RWbYw2KG.js";const S={class:"product-detail"},D={key:0,class:"center"},V={key:1,class:"center error"},M={key:2,class:"content"},R={class:"media"},T=["src","alt"],E={class:"info"},J={class:"title"},O={class:"price"},U={key:0,class:"description"},z={class:"controls"},H={class:"qty"},L=["disabled"],W={key:0,class:"stock"},j=["disabled"],F=["disabled"],G={key:3,class:"center"},K="/assets/product-placeholder.png",Q={__name:"ProductDetail",setup(X){const m=x(),h=A(),v=m.params.id,t=u(null),d=u(!1),i=u(null),o=u(1);async function k(a){d.value=!0,i.value=null;try{const e=await B(a);e?t.value=e:i.value="Product not found."}catch(e){i.value="Error loading product.",console.error(e)}finally{d.value=!1}}console.log(t);function y(){t.value?.stock!=null&&o.value>=t.value.stock||o.value++}function b(){o.value>1&&o.value--}function g(){if(!t.value)return;const a={id:t.value.id,name:t.value.product,price:t.value.price,qty:o.value,image:t.value.image};try{const e=localStorage.getItem("cart"),l=e?JSON.parse(e):[],p=l.find(C=>C.id===a.id);p?p.qty=Math.min(t.value.stock??1/0,p.qty+a.qty):l.push(a),localStorage.setItem("cart",JSON.stringify(l)),window.alert("Added to cart")}catch(e){console.error("Could not update cart",e)}}function w(){if(!t.value)return;const a=`Hola, estoy interesado en el producto: ${t.value.product} (Cantidad: ${o.value}).`,l=`https://wa.me/543446670475?text=${encodeURIComponent(a)}`;window.open(l,"_blank")}return N(()=>{v&&k(v)}),(a,e)=>(c(),n("div",S,[d.value?(c(),n("div",D,"Loading product…")):i.value?(c(),n("div",V,r(i.value),1)):t.value?(c(),n("div",M,[s("div",R,[s("img",{src:t.value.image||K,alt:t.value.name},null,8,T)]),s("div",E,[s("button",{class:"back-btn",onClick:e[0]||(e[0]=l=>q(h).back()),style:{float:"right"}},"← Back"),s("h1",J,r(t.value.product),1),s("p",O,"$"+r(t.value.price),1),t.value.description?(c(),n("p",U,r(t.value.description),1)):_("",!0),s("div",z,[s("div",H,[s("button",{onClick:b,disabled:o.value<=1},"−",8,L),P(s("input",{type:"number","onUpdate:modelValue":e[1]||(e[1]=l=>o.value=l),min:"1"},null,512),[[$,o.value,void 0,{number:!0}]]),s("button",{onClick:y},"+"),t.value.stock!=null?(c(),n("span",W,"("+r(t.value.stock)+" in stock)",1)):_("",!0)]),s("button",{class:"add",onClick:g,disabled:t.value.stock===0},[...e[2]||(e[2]=[s("i",{class:"fa-solid fa-cart-plus"},null,-1),f(" Añadir al carrito ",-1)])],8,j),s("button",{class:"whatsApp",onClick:w,disabled:t.value.stock===0},[...e[3]||(e[3]=[s("i",{class:"fa-brands fa-whatsapp"},null,-1),f(" Pedir por WhatsApp ",-1)])],8,F)])])])):(c(),n("div",G,"No product selected."))]))}},Z=I(Q,[["__scopeId","data-v-876233aa"]]);export{Z as default};
