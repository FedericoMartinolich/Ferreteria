import{_ as S,a as l,e as a,b as t,m as f,t as v,r as p,o as I,g as V,c as k,u as C,p as E,F as h,d as w,q as N,f as L,s as z,x as B,n as A,y as F,z as M,i as D,h as T,w as W,A as j}from"./index-1YSHA9Gv.js";import{b as q}from"./events-BJOWP3dG.js";import{e as O}from"./emptyImg-CXXJHA4n.js";const U={class:"product-card"},X={class:"product-header"},G={class:"product-name"},H={class:"product-price"},J={__name:"ProductCard",props:{product:{type:String},price:{type:String}},setup(m){return(P,n)=>(a(),l("div",U,[t("div",X,[t("h3",G,[n[0]||(n[0]=t("i",{class:"fas fa-hammer"},null,-1)),f(" "+v(m.product),1)]),t("span",H,"$"+v(m.price),1)]),n[1]||(n[1]=t("div",{class:"product-footer"},[t("button",{class:"btn-primary"},[t("i",{class:"fas fa-cart-plus"}),f(" Agregar ")])],-1))]))}},K=S(J,[["__scopeId","data-v-d69252c9"]]),Q={class:"full-width"},R={class:"banner-new-products"},Y={class:"carousel-container"},Z={class:"carousel-wrapper"},tt={class:"products-grid"},et=["src","alt"],st=["src"],at={class:"price"},ot={class:"btn-add"},lt={class:"carousel-dots"},nt=["onClick"],rt={__name:"NewProducts",props:{data:Object},setup(m){const n=m.data,c=p([]),s=p(0),u=p(3),_=()=>{window.innerWidth<640?u.value=1:window.innerWidth<1024?u.value=2:u.value=3};I(async()=>{_(),window.addEventListener("resize",_);for(const o of n.product_ids){const e=await V(o);e&&c.value.push(e)}});const d=k(()=>{const o=[];for(let e=0;e<c.value.length;e+=u.value)o.push(c.value.slice(e,e+u.value));return o}),y=()=>{s.value=(s.value+1)%d.value.length},b=()=>{s.value=(s.value-1+d.value.length)%d.value.length};return(o,e)=>{const $=N("router-link");return a(),l("div",Q,[t("section",R,[t("h2",null,v(C(n).title),1),t("div",Y,[t("button",{class:"carousel-btn prev",onClick:b},"❮"),t("div",Z,[t("div",{class:"carousel-track",style:E({transform:`translateX(-${s.value*100}%)`})},[(a(!0),l(h,null,w(d.value,(r,g)=>(a(),l("div",{class:"carousel-slide",key:g},[t("div",tt,[(a(!0),l(h,null,w(r,i=>(a(),l("div",{key:i.id,class:"product-card"},[i.image_key?(a(),l("img",{key:0,src:C(L)(i),alt:i.product,loading:"lazy",class:"product-image"},null,8,et)):(a(),l("img",{key:1,src:C(O),alt:""},null,8,st)),t("h3",null,v(i.product),1),t("p",at,"$"+v(i.price),1),t("button",ot,[z($,{to:`/ProductDetail/${i.id}`,class:"btn-add"},{default:B(()=>[...e[0]||(e[0]=[f(" Agregar al carrito ",-1)])]),_:1},8,["to"])])]))),128))])]))),128))],4)]),t("button",{class:"carousel-btn next",onClick:y},"❯")]),t("div",lt,[(a(!0),l(h,null,w(d.value,(r,g)=>(a(),l("span",{key:g,class:A({active:s.value===g}),onClick:i=>s.value=g},null,10,nt))),128))])])])}}},ct=S(rt,[["__scopeId","data-v-1fa46627"]]),ut={class:"catalog"},it={class:"search-wrapper"},dt={class:"container"},pt={class:"pagination"},vt=["disabled"],_t=["disabled"],x=30,ft={__name:"Products",setup(m){const P=p([]),n=p(null),c=p(""),s=p(1);I(async()=>{const[o,e]=await Promise.all([F(),q()]);P.value=o,n.value=e[0]||null});const u=k(()=>P.value.filter(o=>o.product.toLowerCase().includes(c.value.toLowerCase()))),_=k(()=>Math.ceil(u.value.length/x)),d=k(()=>{const o=(s.value-1)*x;return u.value.slice(o,o+x)}),y=()=>{s.value<_.value&&s.value++},b=()=>{s.value>1&&s.value--};return M(c,()=>{s.value=1}),(o,e)=>{const $=N("router-link");return a(),l(h,null,[n.value?(a(),D(ct,{key:0,data:n.value},null,8,["data"])):T("",!0),t("section",ut,[e[5]||(e[5]=t("h1",{class:"title"},[t("i",{class:"fas fa-tools"}),f(" Catálogo de Ferretería ")],-1)),t("div",it,[e[1]||(e[1]=t("i",{class:"fas fa-search search-icon"},null,-1)),W(t("input",{"onUpdate:modelValue":e[0]||(e[0]=r=>c.value=r),placeholder:"Buscar producto...",class:"search-input"},null,512),[[j,c.value]])]),t("div",dt,[(a(!0),l(h,null,w(d.value,r=>(a(),D($,{key:r.id,to:`/ProductDetail/${r.id}`,class:"product-link"},{default:B(()=>[z(K,{price:r.price,product:r.product},null,8,["price","product"])]),_:2},1032,["to"]))),128))]),t("div",pt,[t("button",{onClick:b,disabled:s.value===1},[...e[2]||(e[2]=[t("i",{class:"fas fa-chevron-left"},null,-1)])],8,vt),t("span",null,[e[3]||(e[3]=f(" Página ",-1)),t("strong",null,v(s.value),1),f(" de "+v(_.value),1)]),t("button",{onClick:y,disabled:s.value===_.value},[...e[4]||(e[4]=[t("i",{class:"fas fa-chevron-right"},null,-1)])],8,_t)])])],64)}}},Pt=S(ft,[["__scopeId","data-v-ee42966c"]]);export{Pt as default};
