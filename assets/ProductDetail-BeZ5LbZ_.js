import{_ as I,A as x,r as u,o as N,a as n,t as r,b as s,f as _,u as q,z as A,w as P,x as $,l as f,g as B,e as c}from"./index-CWtr0FXD.js";const S={class:"product-detail"},D={key:0,class:"center"},V={key:1,class:"center error"},M={key:2,class:"content"},R={class:"media"},T=["src","alt"],E={class:"info"},J={class:"title"},O={class:"price"},U={key:0,class:"description"},z={class:"controls"},H={class:"qty"},L=["disabled"],W={key:0,class:"stock"},j=["disabled"],F=["disabled"],G={key:3,class:"center"},K="/assets/product-placeholder.png",Q={__name:"ProductDetail",setup(X){const m=x(),h=A(),v=m.params.id,e=u(null),d=u(!1),i=u(null),o=u(1);async function k(a){d.value=!0,i.value=null;try{const t=await B(a);t?e.value=t:i.value="Product not found."}catch(t){i.value="Error loading product.",console.error(t)}finally{d.value=!1}}console.log(e);function y(){e.value?.stock!=null&&o.value>=e.value.stock||o.value++}function b(){o.value>1&&o.value--}function g(){if(!e.value)return;const a={id:e.value.id,name:e.value.product,price:e.value.price,qty:o.value,image:e.value.image};try{const t=localStorage.getItem("cart"),l=t?JSON.parse(t):[],p=l.find(C=>C.id===a.id);p?p.qty=Math.min(e.value.stock??1/0,p.qty+a.qty):l.push(a),localStorage.setItem("cart",JSON.stringify(l)),window.alert("Added to cart")}catch(t){console.error("Could not update cart",t)}}function w(){if(!e.value)return;const a=`Hola, estoy interesado en el producto: ${e.value.product} (Cantidad: ${o.value}).`,l=`https://wa.me/543446670475?text=${encodeURIComponent(a)}`;window.open(l,"_blank")}return N(()=>{v&&k(v)}),(a,t)=>(c(),n("div",S,[d.value?(c(),n("div",D,"Loading product…")):i.value?(c(),n("div",V,r(i.value),1)):e.value?(c(),n("div",M,[s("div",R,[s("img",{src:e.value.image||K,alt:e.value.name},null,8,T)]),s("div",E,[s("button",{class:"back-btn",onClick:t[0]||(t[0]=l=>q(h).back()),style:{float:"right"}},"← Back"),s("h1",J,r(e.value.product),1),s("p",O,"$"+r(e.value.price),1),e.value.description?(c(),n("p",U,r(e.value.description),1)):_("",!0),s("div",z,[s("div",H,[s("button",{onClick:b,disabled:o.value<=1},"−",8,L),P(s("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=l=>o.value=l),min:"1"},null,512),[[$,o.value,void 0,{number:!0}]]),s("button",{onClick:y},"+"),e.value.stock!=null?(c(),n("span",W,"("+r(e.value.stock)+" in stock)",1)):_("",!0)]),s("button",{class:"add",onClick:g,disabled:e.value.stock===0},[...t[2]||(t[2]=[s("i",{class:"fa-solid fa-cart-plus"},null,-1),f(" Añadir al carrito ",-1)])],8,j),s("button",{class:"whatsApp",onClick:w,disabled:e.value.stock===0},[...t[3]||(t[3]=[s("i",{class:"fa-brands fa-whatsapp"},null,-1),f(" Pedir por WhatsApp ",-1)])],8,F)])])])):(c(),n("div",G,"No product selected."))]))}},Z=I(Q,[["__scopeId","data-v-09c73e50"]]);export{Z as default};
